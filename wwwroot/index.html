<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="version" content="@GetType()?.Assembly?.GetName()?.Version?.ToString()" />
    <title>Weva</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="Weva.styles.css" rel="stylesheet" />

    <script src="_content/MatBlazor/dist/matBlazor.js"></script>
    <link href="_content/MatBlazor/dist/matBlazor.css" rel="stylesheet" />
  </head>

  <body>
    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
      An unhandled error has occurred.
      <a href="" class="reload">Reload</a>
      <a class="dismiss">ðŸ—™</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
  </body>
</html>

<script>
  // Define function to focus element by ID
  window.SetFocusToElementById = (id) => {
    var element = document.getElementById(id);
    if (element && document.activeElement !== element) element.focus();
  };

  // If keypress detected, attempt to focus the videoPlayer
  document.addEventListener("keypress", () => {
    SetFocusToElementById("videoPlayer");
  });

  // Define function to trigger a click
  window.ClickElementById = (id) => {
    document.getElementById(id).click();
  };

  async function setImageUsingStreaming(imageElementId, imageStream) {
    const arrayBuffer = await imageStream.arrayBuffer();
    const blob = new Blob([arrayBuffer]);
    const url = URL.createObjectURL(blob);
    document.getElementById(imageElementId).src = url;
  }

  function _base64ToArrayBuffer(base64) {
    var binary_string = window.atob(base64);
    var len = binary_string.length;
    var bytes = new Uint8Array(len);

    for (var i = 0; i < len; i++) {
      bytes[i] = binary_string.charCodeAt(i);
    }

    return bytes.buffer;
  }
  function loadVideo(base64, contentType) {
    var arrayBuffer = _base64ToArrayBuffer(base64);
    const blob = new Blob([arrayBuffer], { type: contentType });
    var dataUrl = window.URL.createObjectURL(blob);
    return dataUrl;
    {
      {
        /* var video = document.getElementById("videoTagId");
    video.src = dataUrl; */
      }
    }
  }
</script>
